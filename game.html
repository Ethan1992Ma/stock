<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è²¿æ˜“åˆ©æ½¤åˆ¤å®šå™¨</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { font-size: 20px; }
    table { border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: center; }
    th { background: #eee; }
    select { margin: 5px; }
    .result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ğŸ“¦ è²¿æ˜“åˆ©æ½¤åˆ¤å®šå™¨</h1>
  <p>è«‹é¸æ“‡æ¯å€‹åŸå¸‚çš„ã€Œè²·å…¥ã€èˆ‡ã€Œè³£å‡ºã€è¡Œæƒ…ï¼š</p>

  <div id="inputs"></div>

  <button onclick="calculate()">è¨ˆç®—æœ€å„ªè§£</button>

  <div class="result" id="bestResult"></div>

  <h2>å®Œæ•´åˆ©æ½¤è¡¨</h2>
  <div id="profitTable"></div>

  <script>
    const cities = ["æ³‰å·", "å¹½å·", "æ­å·", "é›™ç‹", "åæ–¹"];
    const buyOptions = { "åŸºç¤": 1, "é«˜åƒ¹": 1.2 }; // é«˜åƒ¹ = 1.2 å€æˆæœ¬
    const sellOptions = {
      "æ¥µä½": 0.5,
      "åŸºç¤": 1.0,
      "ç•¥é«˜": 2.0,
      "é«˜åƒ¹": 3.0,
      "æ¥µé«˜": 4.0
    };

    // åƒè€ƒç²åˆ©åŸºæº–è¡¨
    const baseProfit = {
      "æ³‰å·": { "æ­å·": 12000, "å¹½å·": 9000, "é›™ç‹": 9000 },
      "å¹½å·": { "åæ–¹": 9190, "æ³‰å·": 8100 },
      "æ­å·": { "æ³‰å·": 12500, "å¹½å·": 8083, "åæ–¹": 7166 },
      "é›™ç‹": { "åæ–¹": 6097, "å¹½å·": 4609 },
      "åæ–¹": { "å¹½å·": 7608, "é›™ç‹": 7608, "æ­å·": 2347 }
    };

    // å»ºç«‹è¼¸å…¥è¡¨å–®
    const container = document.getElementById("inputs");
    cities.forEach(city => {
      const div = document.createElement("div");
      div.innerHTML = `<b>${city}</b> è²·å…¥: 
        <select id="${city}-buy">
          ${Object.keys(buyOptions).map(opt => `<option>${opt}</option>`).join("")}
        </select>
        è³£å‡º: 
        <select id="${city}-sell">
          ${Object.keys(sellOptions).map(opt => `<option>${opt}</option>`).join("")}
        </select>`;
      container.appendChild(div);
    });

    function calculate() {
      let results = [];
      let best = { profit: -Infinity, route: "" };

      for (let from of cities) {
        for (let to of cities) {
          if (from === to) continue;
          if (!baseProfit[from] || !baseProfit[from][to]) continue;

          let buyType = document.getElementById(`${from}-buy`).value;
          let sellType = document.getElementById(`${to}-sell`).value;

          let base = baseProfit[from][to];
          let cost = base * buyOptions[buyType];
          let revenue = base * sellOptions[sellType];
          let profit = revenue - cost;

          results.push({ from, to, base, buyType, sellType, profit });

          if (profit > best.profit) {
            best = { profit, route: `${from} â†’ ${to} (${profit})` };
          }
        }
      }

      // é¡¯ç¤ºæœ€ä½³è§£
      document.getElementById("bestResult").innerText = `æœ€å„ªè§£ï¼š${best.route}`;

      // é¡¯ç¤ºå®Œæ•´åˆ©æ½¤è¡¨
      let html = "<table><tr><th>é€²è²¨</th><th>å‡ºè²¨</th><th>åŸºæº–å€¼</th><th>è²·å…¥</th><th>è³£å‡º</th><th>åˆ©æ½¤</th></tr>";
      results.forEach(r => {
        html += `<tr><td>${r.from}</td><td>${r.to}</td><td>${r.base}</td><td>${r.buyType}</td><td>${r.sellType}</td><td>${r.profit}</td></tr>`;
      });
      html += "</table>";
      document.getElementById("profitTable").innerHTML = html;
    }
  </script>
</body>
</html>
