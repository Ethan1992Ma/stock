<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è²¿æ˜“åˆ©æ½¤åˆ¤å®šå™¨</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; background: #f9f9f9; margin: 0; }
    h1 { font-size: 18px; text-align: center; }
    p { font-size: 14px; text-align: center; }
    .city-input { display: flex; flex-direction: column; margin: 8px 0; padding: 8px; background: #fff; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .city-input b { margin-bottom: 4px; }
    select { padding: 6px; font-size: 14px; margin: 2px 0; width: 100%; border-radius: 6px; border: 1px solid #ccc; }
    button { width: 100%; padding: 10px; margin-top: 12px; font-size: 16px; background: #007aff; color: white; border: none; border-radius: 8px; cursor: pointer; }
    button:active { background: #005bb5; }
    .result { margin-top: 16px; font-weight: bold; text-align: center; font-size: 16px; }
    table { border-collapse: collapse; margin-top: 16px; width: 100%; font-size: 12px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    th { background: #eee; }
    @media (max-width: 480px) {
      table { font-size: 10px; }
      th, td { padding: 4px; }
    }
  </style>
</head>
<body>
  <h1>ğŸ“¦ è²¿æ˜“åˆ©æ½¤åˆ¤å®šå™¨</h1>
  <p>è«‹é¸æ“‡æ¯å€‹åŸå¸‚çš„ã€Œè²·å…¥ã€èˆ‡ã€Œè³£å‡ºã€è¡Œæƒ…ï¼š</p>

  <div id="inputs"></div>

  <button onclick="calculate()">è¨ˆç®—æœ€å„ªè§£</button>

  <div class="result" id="bestResult"></div>

  <h2 style="font-size:16px; margin-top:20px; text-align:center;">å®Œæ•´åˆ©æ½¤è¡¨</h2>
  <div id="profitTable"></div>

  <script>
    const cities = ["æ³‰å·", "å¹½å·", "æ­å·", "é›™ç‹", "åæ–¹"];
    const buyOptions = { "åŸºç¤": 1, "é«˜åƒ¹": 1.2 }; // é«˜åƒ¹ = 1.2 å€æˆæœ¬
    const sellOptions = {
      "æ¥µä½": 0.5,
      "åŸºç¤": 1.0,
      "ç•¥é«˜": 2.0,
      "é«˜åƒ¹": 3.0,
      "æ¥µé«˜": 4.0
    };

    const baseProfit = {
      "æ³‰å·": { "æ­å·": 12000, "å¹½å·": 9000, "é›™ç‹": 9000 },
      "å¹½å·": { "åæ–¹": 9190, "æ³‰å·": 8100 },
      "æ­å·": { "æ³‰å·": 12500, "å¹½å·": 8083, "åæ–¹": 7166 },
      "é›™ç‹": { "åæ–¹": 6097, "å¹½å·": 4609 },
      "åæ–¹": { "å¹½å·": 7608, "é›™ç‹": 7608, "æ­å·": 2347 }
    };

    const container = document.getElementById("inputs");
    cities.forEach(city => {
      const div = document.createElement("div");
      div.classList.add("city-input");
      div.innerHTML = `<b>${city}</b>
        è²·å…¥:
        <select id="${city}-buy">
          ${Object.keys(buyOptions).map(opt => `<option>${opt}</option>`).join("")}
        </select>
        è³£å‡º:
        <select id="${city}-sell">
          ${Object.keys(sellOptions).map(opt => `<option>${opt}</option>`).join("")}
        </select>`;
      container.appendChild(div);
    });

    function calculate() {
      let results = [];
      let best = { profit: -Infinity, route: "" };

      for (let from of cities) {
        for (let to of cities) {
          if (from === to) continue;
          if (!baseProfit[from] || !baseProfit[from][to]) continue;

          let buyType = document.getElementById(`${from}-buy`).value;
          let sellType = document.getElementById(`${to}-sell`).value;

          let base = baseProfit[from][to];
          let cost = base * buyOptions[buyType];
          let revenue = base * sellOptions[sellType];
          let profit = revenue - cost;

          results.push({ from, to, base, buyType, sellType, cost, revenue, profit });

          if (profit > best.profit) {
            best = { profit, route: `${from} â†’ ${to} (${profit})` };
          }
        }
      }

      document.getElementById("bestResult").innerText = `æœ€å„ªè§£ï¼š${best.route}`;

      let html = "<table><tr><th>é€²è²¨</th><th>å‡ºè²¨</th><th>åŸºæº–å€¼</th><th>è²·å…¥</th><th>è³£å‡º</th><th>æˆæœ¬</th><th>æ”¶å…¥</th><th>åˆ©æ½¤</th></tr>";
      results.forEach(r => {
        html += `<tr><td>${r.from}</td><td>${r.to}</td><td>${r.base}</td><td>${r.buyType}</td><td>${r.sellType}</td><td>${r.cost}</td><td>${r.revenue}</td><td>${r.profit}</td></tr>`;
      });
      html += "</table>";
      document.getElementById("profitTable").innerHTML = html;
    }
  </script>
</body>
</html>
